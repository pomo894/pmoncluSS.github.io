<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <title>Login amb Google</title>

    <!-- SCRIPT DE GOOGLE SIGN-IN -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- CLIENT ID (SUBSTITUEIX EL_TEU_CLIENT_ID!) -->
    <meta name="google-signin-client_id" content="149877456284-h9mmrhujn0s5caratcg65um9net8id9g.apps.googleusercontent.com">

    <style>
        body {
            font-family: Arial;
            text-align: center;
            margin-top: 100px;
        }

        #boto-sortir {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
        }

        h2 {
            margin-top: 30px;
            color: #333;
        }
    </style>
</head>

<body>

    <!-- INICIALITZACIÓ DE GOOGLE SIGN-IN -->
    <div id="g_id_onload"
         data-client_id="149877456284-h9mmrhujn0s5caratcg65um9net8id9g.apps.googleusercontent.com"
         data-callback="onSignIn">
    </div>

    <!-- BOTÓ DE GOOGLE -->
    <div class="g_id_signin"
         data-type="standard">
    </div>

    <!-- MISSATGE DE BENVINGUDA -->
    <h2 id="missatge-benvinguda" style="display:none;">Missatge de benvinguda</h2>

    <!-- BOTÓ DE DESCONNEXIÓ -->
    <button id="boto-sortir" style="display:none;" onclick="signOut()">Desconnectar</button>

    <script>
        // Quan l’usuari fa login amb Google
        function onSignIn(response) {

            // Obtenir el token ID
            var id_token = response.credential;
            console.log("ID Token: " + id_token);

            // Amagar botó de login
            document.querySelector('.g_id_signin').style.display = 'none';

            // Mostrar botó de desconnexió
            document.getElementById('boto-sortir').style.display = 'block';

            // Mostrar missatge de benvinguda
            document.getElementById('missatge-benvinguda').style.display = 'block';
            document.getElementById('missatge-benvinguda').innerText = "Benvingut/da!";
        }

        // Quan l’usuari fa logout
        function signOut() {
            google.accounts.id.disableAutoSelect();

            // Mostrar botó de login
            document.querySelector('.g_id_signin').style.display = 'block';

            // Amagar botó de desconnexió
            document.getElementById('boto-sortir').style.display = 'none';

            // Amagar missatge de benvinguda
            document.getElementById('missatge-benvinguda').style.display = 'none';

            console.log("Sessió tancada");
        }
    </script>

</body>
</html>
